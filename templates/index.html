<!DOCTYPE html>
<html lang="en" xmlns="">
<head>
    <meta charset="UTF-8">
    <title>bi8a-Project</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" type="text/css"
          href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.0/semantic.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.9/semantic.min.js"></script>
    <script defer src="{{ url_for('static', filename='index.js') }}"></script>
    <script src="https://cdn.rawgit.com/mdehoog/Semantic-UI/6e6d051d47b598ebab05857545f242caf2b4b48c/dist/semantic.min.js"></script>
    <script>let results = {{ results | safe }}</script>

</head>

<body>
<div class="center aligned stackable ui page grid">
    <div class="sixteen wide one column">
        <!-- HEADERS -->
        <!-- Sub top of the page -->
        <h0 class="ui small header"></h0>
        <h1 class="ui teal icon header">
            <i class="search icon"></i>
            <div class="content">
                PubMed Article Searcher
                <div class="sub header">
                    "Keeping gene panels updated since 2020"
                </div>
            </div>
        </h1>
        <div class="ui divider"></div>
        <!--<h2 class="ui large header">Search Tool</h2>-->
        <!--<div class="ui divider"></div>-->
    </div>

    <!-- User submitting form and summary table -->
    <div class="ui horizontal segments">
        <!--<div class="ui vertical segments">-->
        <div class="ui teal segment">
            <h2 class="ui large teal header">Search Tool</h2>
            <br>
            <div class="ui form">
                <form method="get" action="/">
                    <!-- Hier alle zooi voor in de form -->
                    <!-- Fields links van de UI grid form -->
                    <div class="field"><label>Phenotype descriptors</label>
                        <div class="ui left icon input"><input type="text"
                                                               placeholder="Your descriptors here"
                                                               name="pheno_input"><i
                                class="search icon"></i>
                        </div>
                    </div>
                    <div class="field">
                        <label>Article date limit</label>
                        <div class="ui calendar" id="rangestart">
                            <div class="ui input left icon">
                                <i class="calendar icon"></i>
                                <input type="text"
                                       placeholder="Fill earliest date to search from"
                                       name="calendar_input">
                            </div>
                        </div>
                    </div>

                    <div class="field"><label>E-mail:</label>
                        <div class="ui left icon input"><input
                                type="text"
                                placeholder="Email"
                                name="input_mail"><i
                                class="mail icon"></i>
                        </div>
                    </div>

                    <div class="ui field">
                    </div>
                    <div class="inline field">
                        <label>Enter Gene Symbols</label>
                        <div class="field">
                                <textarea rows="3"
                                          name="symbols_input"></textarea>
                        </div>
                    </div>
                    <input type="submit" class="ui teal submit button"
                           value="Submit search" name="submit_button">
                </form>
                <br><br>
                {% if results %}
                    <!-- Fluid dropdown -->
                    {% if results %}
                        <div class="inline field">
                            <label>Select algorithm focus</label>
                            <select multiple=""
                                    class="label ui selection fluid dropdown"
                                    name="focus_input"
                                    id="multiple_select">
                                <option value="Title">Title</option>
                                <option value="Sentence">Sentence</option>
                                <option value="Abstract">Abstract</option>
                                <option value="Multiple Abstracts">Multiple
                                    Abstracts
                                </option>
                            </select>
                        </div>
                        <br>
                        <div>
                            <div class="ui checked checkbox">
                                <input type="checkbox" checked="">
                                <label>Notify me by e-mail when my results are
                                    ready!</label>
                                <br>
                            </div>
                        </div>
                        <div class="field"><label>Job Title:</label>
                            <div class="ui left icon input"><input
                                    type="text"
                                    placeholder="Job title"><i
                                    class="clipboard icon"></i>
                            </div>
                        </div>
                        </div>
                    {% endif %}
                    <br><br>
                    <button class="ui teal button test-button">Algorithm
                    </button>
                {% endif %}
        </div>

        <!-- Summary Tabel -->

        <div class="ui teal segment">
            <h3 class="ui large teal header">Search results summary</h3>
            {% if articles %}
                <a href="{{ url_for('download') }}">
                    <button class="ui teal upload button" id="download-button">
                        Download data
                    </button>
                </a>
            {% endif %}
            <br>
            <table class="ui sortable large celled table ">
                <thead>
                <tr>
                    <th> Query</th>
                    <th> Symbols Searched</th>
                    <th> # of articles found</th>
                </tr>
                </thead>
                {% if articles %}
                    <tbody>
                    <!-- Dit moet nog aangepast worden naar dynamisch in te vullen data vanuit de zoekopdracht -->
                    {% for article in articles %}
                        {% for data in article %}
                            <tr>
                                <td data-label="Query">{{ data["zoekwoord"] }}</td>
                                <td data-label="Symbols">{{ data["gezochte_symbolen"] }}</td>
                                <td data-label="# of articles found"><a
                                        target="_blank"
                                        href="{{ data["link"] }}">{{ data["aantal_hits"] }}
                                </a>
                                </td>
                            </tr>
                        {% endfor %}
                    {% endfor %}
                    </tbody>
                {% endif %}
            </table>
        </div>
    </div>
</div>

<!-- Big results table -->
<div class="sixteen wide one column">

    <div class="ui divider">
        <br><br>
        <div class="left aligned ui segment">
            <h4 class="ui large teal header">Full Search Results</h4>
            <table class="ui celled table">
                <thead>
                <tr>
                    <th> Query</th>
                    <th> Gene Symbol</th>
                    <th> Keywords</th>
                    <th> Article Title</th>
                    <th> Publication Date</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td data-label="Query">FOX2P</td>
                    <td data-label="Gene Symbols">Some Symbol</td>
                    <td data-label="Keywords">4</td>
                    <td data-label="Article Title">Insert a title</td>
                    <td data-label="Publication Date">19-4-2014</td>
                </tr>
                </tbody>
            </table>
        </div>
        <br><br><br><br>
    </div>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.0/semantic.min.js"></script>
</body>
</html>

